<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindful Friend - Mental Health Support</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-light: #f8fafc;
            --primary-blue: #e0f2fe;
            --primary-lavender: #f3e8ff;
            --primary-peach: #fef3e2;
            --text-dark: #334155;
            --text-light: #64748b;
            --accent-blue: #0ea5e9;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --user-bubble: #3b82f6;
            --bot-bubble: #f1f5f9;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --primary-light: #1e293b;
            --primary-blue: #1e3a8a;
            --primary-lavender: #4c1d95;
            --primary-peach: #92400e;
            --text-dark: #f1f5f9;
            --text-light: #cbd5e1;
            --bot-bubble: #374151;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary-blue) 50%, var(--primary-lavender) 100%);
            min-height: 100vh;
            color: var(--text-dark);
            transition: all 0.3s ease;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
        }

        .header p {
            color: var(--text-light);
            font-size: 1.1rem;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.3);
        }

        .top-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .mood-checkin, .daily-affirmation {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .mood-checkin h3, .daily-affirmation h3 {
            margin-bottom: 15px;
            color: var(--text-dark);
        }

        .mood-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .mood-btn {
            background: rgba(255, 255, 255, 0.3);
            border: none;
            border-radius: 10px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 70px;
        }

        .mood-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .mood-btn.active {
            background: var(--accent-blue);
            color: white;
            transform: scale(1.05);
        }

        .affirmation-text {
            font-style: italic;
            color: var(--text-light);
            line-height: 1.6;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--accent-purple);
        }

        .chat-container {
            flex: 1;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-lg);
            display: flex;
            flex-direction: column;
            min-height: 400px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            padding-right: 10px;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-end;
            opacity: 0;
            transform: translateY(20px);
            animation: messageSlideIn 0.5s ease forwards;
        }

        @keyframes messageSlideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-bubble {
            max-width: 70%;
            padding: 12px 18px;
            border-radius: 18px;
            word-wrap: break-word;
            box-shadow: var(--shadow);
            position: relative;
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, var(--user-bubble), #2563eb);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.bot .message-bubble {
            background: var(--bot-bubble);
            color: var(--text-dark);
            border-bottom-left-radius: 4px;
        }

        .typing-indicator {
            display: none;
            padding: 15px 20px;
            background: var(--bot-bubble);
            border-radius: 18px;
            border-bottom-left-radius: 4px;
            margin-bottom: 15px;
            max-width: 70px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--text-light);
            border-radius: 50%;
            animation: typingDot 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingDot {
            0%, 60%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            30% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        .input-area {
            display: flex;
            gap: 10px;
            align-items: end;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
        }

        .chat-input {
            width: 100%;
            padding: 15px 20px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: var(--text-dark);
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
            resize: none;
            min-height: 50px;
            max-height: 120px;
        }

        .chat-input:focus {
            background: rgba(255, 255, 255, 0.3);
            box-shadow: var(--shadow);
            transform: translateY(-2px);
        }

        .chat-input::placeholder {
            color: var(--text-light);
        }

        .send-btn {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .send-btn:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: var(--shadow-lg);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .bottom-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .crisis-support, .tips-section {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .crisis-link {
            display: inline-block;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            text-decoration: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-align: center;
        }

        .crisis-link:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .tips-list {
            list-style: none;
        }

        .tips-list li {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            border-left: 3px solid var(--accent-blue);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .tips-list li:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        @media (max-width: 768px) {
            .top-section, .bottom-section {
                grid-template-columns: 1fr;
            }
            
            .mood-buttons {
                justify-content: center;
            }
            
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
        }

        /* Scrollbar styling */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="theme-toggle" onclick="toggleTheme()">🌙</button>
            <h1>Hi, I'm your Mindful Friend 🌸</h1>
            <p>I'm here to listen and support you</p>
        </div>

        <div class="top-section">
            <div class="mood-checkin">
                <h3>How are you feeling today?</h3>
                <div class="mood-buttons">
                    <button class="mood-btn" onclick="selectMood('happy', this)">😊 Happy</button>
                    <button class="mood-btn" onclick="selectMood('okay', this)">😐 Okay</button>
                    <button class="mood-btn" onclick="selectMood('sad', this)">😔 Sad</button>
                    <button class="mood-btn" onclick="selectMood('stressed', this)">😣 Stressed</button>
                </div>
            </div>

            <div class="daily-affirmation">
                <h3>Daily Affirmation ✨</h3>
                <div class="affirmation-text" id="affirmationText">
                    "You are stronger than you think, braver than you feel, and more loved than you know."
                </div>
            </div>
        </div>

        <div class="chat-container">
            <div class="chat-messages" id="chatMessages">
                <div class="message bot">
                    <div class="message-bubble">
                        Hello! Welcome to our safe space. I'm here to listen without judgment and offer support. How can I help you today? Feel free to share what's on your mind. 💙
                    </div>
                </div>
            </div>

            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>

            <div class="input-area">
                <div class="input-wrapper">
                    <textarea 
                        class="chat-input" 
                        id="messageInput" 
                        placeholder="Type your message here... (Press Enter to send)"
                        rows="1"
                    ></textarea>
                </div>
                <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                    ➤
                </button>
            </div>
        </div>

        <div class="bottom-section">
            <div class="crisis-support">
                <h3>Need Immediate Help? 🆘</h3>
                <p style="margin-bottom: 15px; color: var(--text-light);">If you're in crisis, please reach out immediately:</p>
                <a href="tel:988" class="crisis-link">Call 988 - Crisis Lifeline</a>
            </div>

            <div class="tips-section">
                <h3>Quick Self-Care Tips 🌱</h3>
                <ul class="tips-list">
                    <li onclick="addTipToChat(this)">Try deep breathing for 2 minutes</li>
                    <li onclick="addTipToChat(this)">Take a short walk outside</li>
                    <li onclick="addTipToChat(this)">Write down 3 things you're grateful for</li>
                    <li onclick="addTipToChat(this)">Listen to calming music</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        let currentMood = null;
        let chatHistory = [];
        
        const affirmations = [
            "You are stronger than you think, braver than you feel, and more loved than you know.",
            "Every day is a new opportunity to grow and heal.",
            "Your feelings are valid, and it's okay to take things one step at a time.",
            "You have survived 100% of your difficult days so far. You're doing great.",
            "Progress isn't always linear, and that's perfectly okay.",
            "You deserve kindness, especially from yourself.",
            "Your mental health matters, and taking care of it is a sign of strength.",
            "You are worthy of love, happiness, and peace.",
            "Small steps forward are still steps forward.",
            "You have the power to create positive change in your life."
        ];

        const moodResponses = {
            happy: [
                "That's wonderful to hear! I'm so glad you're feeling happy today. What's contributing to your positive mood?",
                "It's beautiful that you're feeling happy! Would you like to share what's bringing you joy today?",
                "I love hearing that you're in a good space! What's been the highlight of your day so far?"
            ],
            okay: [
                "Thank you for sharing that you're feeling okay. Sometimes 'okay' is exactly where we need to be. Is there anything specific on your mind?",
                "It's perfectly valid to feel just okay. Would you like to talk about what's happening in your life right now?",
                "Being okay is a good place to start from. Is there anything you'd like to explore or discuss today?"
            ],
            sad: [
                "I'm sorry you're feeling sad today. Your feelings are completely valid, and I'm here to listen. Would you like to share what's been weighing on your heart?",
                "Thank you for trusting me with how you're feeling. Sadness can be really difficult. What's been going through your mind lately?",
                "I appreciate you being honest about feeling sad. Sometimes it helps to talk about what's causing these feelings. I'm here to listen without judgment."
            ],
            stressed: [
                "I can understand that stress can feel overwhelming. You're not alone in feeling this way. What's been the main source of stress for you lately?",
                "Stress can be really challenging to deal with. Thank you for sharing this with me. What's been on your mind that's causing you to feel this way?",
                "I hear that you're feeling stressed, and that's completely understandable given everything you might be dealing with. Would you like to talk about what's been causing you the most stress?"
            ]
        };

        const supportiveResponses = [
            "Thank you for sharing that with me. Your feelings are completely valid, and I want you to know that you're not alone in this.",
            "I can hear that this is really important to you. It takes courage to open up about what you're going through.",
            "That sounds like a lot to handle. You're being really strong by reaching out and talking about it.",
            "I'm honored that you trust me with what you're experiencing. Your feelings make complete sense given what you're dealing with.",
            "It's okay to feel however you're feeling right now. There's no right or wrong way to process what you're going through.",
            "You're taking a positive step by talking about this. Sometimes just expressing our thoughts and feelings can provide some relief.",
            "I want to acknowledge how difficult this must be for you. Your willingness to share shows real strength and self-awareness.",
            "Thank you for being so open with me. Remember that healing isn't linear, and it's okay to take things one day at a time."
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadDailyAffirmation();
            setupInputHandlers();
            loadChatHistory();
        });

        function loadDailyAffirmation() {
            const today = new Date().toDateString();
            let savedAffirmation = localStorage.getItem('dailyAffirmation');
            let savedDate = localStorage.getItem('affirmationDate');
            
            if (savedDate !== today || !savedAffirmation) {
                const randomIndex = Math.floor(Math.random() * affirmations.length);
                savedAffirmation = affirmations[randomIndex];
                // Note: In Claude.ai artifacts, localStorage isn't available, so we'll just use a random affirmation
                try {
                    localStorage.setItem('dailyAffirmation', savedAffirmation);
                    localStorage.setItem('affirmationDate', today);
                } catch (e) {
                    // Fallback for environments without localStorage
                }
            }
            
            document.getElementById('affirmationText').textContent = savedAffirmation;
        }

        function setupInputHandlers() {
            const messageInput = document.getElementById('messageInput');
            
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            messageInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
            });
        }

        function loadChatHistory() {
            try {
                const saved = localStorage.getItem('chatHistory');
                if (saved) {
                    chatHistory = JSON.parse(saved);
                    chatHistory.forEach(msg => {
                        addMessageToChat(msg.type, msg.content, false);
                    });
                }
            } catch (e) {
                // Fallback for environments without localStorage
                chatHistory = [];
            }
        }

        function saveChatHistory() {
            try {
                localStorage.setItem('chatHistory', JSON.stringify(chatHistory));
            } catch (e) {
                // Fallback for environments without localStorage
            }
        }

        function selectMood(mood, element) {
            currentMood = mood;
            
            // Remove active class from all mood buttons
            document.querySelectorAll('.mood-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to selected button
            element.classList.add('active');
            
            // Send mood-specific response
            setTimeout(() => {
                const responses = moodResponses[mood];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                addMessageToChat('bot', randomResponse);
            }, 500);
        }

        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (message === '') return;
            
            // Add user message
            addMessageToChat('user', message);
            
            // Clear input and reset height
            messageInput.value = '';
            messageInput.style.height = 'auto';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Generate bot response after delay
            setTimeout(() => {
                hideTypingIndicator();
                const response = generateBotResponse(message);
                addMessageToChat('bot', response);
            }, 1000 + Math.random() * 2000);
        }

        function addMessageToChat(type, content, save = true) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const bubbleDiv = document.createElement('div');
            bubbleDiv.className = 'message-bubble';
            bubbleDiv.textContent = content;
            
            messageDiv.appendChild(bubbleDiv);
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Save to history
            if (save) {
                chatHistory.push({ type, content });
                saveChatHistory();
            }
        }

        function showTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            const chatMessages = document.getElementById('chatMessages');
            indicator.style.display = 'block';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            indicator.style.display = 'none';
        }

        function generateBotResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();
            
            // Check for crisis keywords
            if (lowerMessage.includes('suicide') || lowerMessage.includes('kill myself') || 
                lowerMessage.includes('end it all') || lowerMessage.includes('can\'t go on')) {
                return "I'm really concerned about you right now. You don't have to go through this alone. Please consider reaching out to the crisis lifeline at 988 immediately. You matter, and there are people who want to help you through this difficult time.";
            }
            
            // Check for anxiety/panic keywords
            if (lowerMessage.includes('anxiety') || lowerMessage.includes('panic') || 
                lowerMessage.includes('anxious') || lowerMessage.includes('worried')) {
                return "Anxiety can feel overwhelming, but you're taking a positive step by talking about it. Try taking some slow, deep breaths with me - in for 4 counts, hold for 4, out for 4. Remember that anxiety is temporary and you have the strength to get through this moment.";
            }
            
            // Check for depression keywords
            if (lowerMessage.includes('depressed') || lowerMessage.includes('depression') || 
                lowerMessage.includes('hopeless') || lowerMessage.includes('empty')) {
                return "Depression can make everything feel heavy and difficult. Please know that what you're experiencing is real and valid, and you don't have to face it alone. Small steps count - even reaching out here today shows your strength. Have you been able to talk to anyone else about how you're feeling?";
            }
            
            // Check for loneliness keywords
            if (lowerMessage.includes('lonely') || lowerMessage.includes('alone') || 
                lowerMessage.includes('isolated') || lowerMessage.includes('no friends')) {
                return "Feeling lonely can be really painful, and I want you to know that your feelings are completely valid. You're not truly alone - you reached out here, which shows courage. Sometimes connection can start small, even with brief interactions. What's one small way you might be able to connect with someone today?";
            }
            
            // Check for gratitude or positive keywords
            if (lowerMessage.includes('grateful') || lowerMessage.includes('thank') || 
                lowerMessage.includes('better') || lowerMessage.includes('good day')) {
                return "It's wonderful to hear some positivity from you! Gratitude and recognizing good moments, even small ones, can be really powerful for our mental wellbeing. What's been the best part of your day so far?";
            }
            
            // Default supportive response
            const randomResponse = supportiveResponses[Math.floor(Math.random() * supportiveResponses.length)];
            return randomResponse;
        }

        function addTipToChat(element) {
            const tip = element.textContent;
            const message = `I'd like to try: ${tip}`;
            
            addMessageToChat('user', message);
            
            setTimeout(() => {
                let response = "";
                if (tip.includes('breathing')) {
                    response = "That's a great choice! Deep breathing can be really calming. Try this with me: breathe in slowly for 4 counts, hold for 4, then breathe out for 4 counts. Let's do this a few times together. How does that feel?";
                } else if (tip.includes('walk')) {
                    response = "A walk outside can work wonders! Fresh air and gentle movement can help shift your mood and perspective. Even just 5-10 minutes can make a difference. I hope you enjoy your time outdoors! 🌳";
                } else if (tip.includes('grateful')) {
                    response = "Practicing gratitude is such a powerful tool for mental wellness. Take your time thinking of three things - they can be big or small. Sometimes it's the little things like a warm cup of tea or a sunny day that bring the most joy. What comes to mind for you?";
                } else if (tip.includes('music')) {
                    response = "Music can be incredibly healing and soothing. Whether it's classical, nature sounds, lo-fi, or whatever feels right to you in this moment - let the music wash over you and give yourself permission to just be present with the sounds. 🎵";
                }
                addMessageToChat('bot', response);
            }, 1000);
        }

        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.querySelector('.theme-toggle');
            
            if (body.hasAttribute('data-theme')) {
                body.removeAttribute('data-theme');
                themeToggle.textContent = '🌙';
            } else {
                body.setAttribute('data-theme', 'dark');
                themeToggle.textContent = '☀️';
            }
        }

        // Auto-focus on input when page loads
        window.addEventListener('load', function() {
            document.getElementById('messageInput').focus();
        });
    </script>
</body>
</html>